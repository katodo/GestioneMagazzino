{% extends "base.html" %}
{% block content %}
<h3>Articoli da posizionare</h3>
<div class="form-section">
  <div class="table-responsive table-sticky">
    <table class="table table-striped align-middle mb-0" id="tbl">
      <thead><tr><th>ID</th><th>Categoria</th><th>Descrizione</th><th>Misura</th><th>Azioni</th></tr></thead>
      <tbody>
        {% for it in items %}
        <tr>
          <td>{{ it.id }}</td>
          <td>{% if it.category %}<span class="badge-color" style="background:{{ it.category.color }}"></span>{{ it.category.name }}{% endif %}</td>
          <td>{{ compose_caption(it) }}</td>
          <td>{{ it.thread_size or '' }}</td>
          <td class="text-nowrap">
            <a href="{{ url_for('edit_item', item_id=it.id) }}" class="btn btn-sm btn-outline-primary">Modifica</a>
            <a href="{{ url_for('admin_items') }}#grid" class="btn btn-sm btn-outline-secondary">Vai alla griglia</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<script>
  $(function(){
    if ($.fn.DataTable) {
      $('#tbl').DataTable({
        pageLength:50,
        lengthMenu:[10, 25, 50, 100],
        order:[[1,'asc']],
        language: { search: "Cerca nella tabella:" }
      });
    }
  });
</script>
{% endblock %}
